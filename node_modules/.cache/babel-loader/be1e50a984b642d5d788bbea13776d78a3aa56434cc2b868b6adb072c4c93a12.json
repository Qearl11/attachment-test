{"ast":null,"code":"/**\n * 计算依恋类型得分\n * @param {Object} answers - 用户答案对象 { questionId: score } (score: 1-7)\n * @param {Array} items - 题目定义数组\n * @returns {Object} { anxiety: number, avoidance: number }\n */\nexport const calculateDimensionScore = (answers, items) => {\n  let anxietySum = 0;\n  let anxietyCount = 0;\n  let avoidanceSum = 0;\n  let avoidanceCount = 0;\n  items.forEach(item => {\n    const rawScore = answers[item.id];\n    if (rawScore === undefined) return; // 未回答\n\n    // 处理反向计分 (1-7分制：8 - score)\n    const finalScore = item.reverse ? 8 - rawScore : rawScore;\n    if (item.dimension === \"anxiety\") {\n      anxietySum += finalScore;\n      anxietyCount++;\n    } else if (item.dimension === \"avoidance\") {\n      avoidanceSum += finalScore;\n      avoidanceCount++;\n    }\n  });\n  return {\n    anxiety: anxietyCount > 0 ? (anxietySum / anxietyCount).toFixed(2) : 0,\n    avoidance: avoidanceCount > 0 ? (avoidanceSum / avoidanceCount).toFixed(2) : 0\n  };\n};\n\n/**\n * 判定依恋类型\n * @param {number} anxiety - 焦虑分\n * @param {number} avoidance - 回避分\n * @returns {string} 类型名称 (Secure, Anxious, Avoidant, Disorganized)\n */\nexport const getAttachmentStyle = (anxiety, avoidance) => {\n  // 阈值通常为中点，这里假设为 4.0 (1-7分制的中点)\n  // 也可以根据具体常模调整，例如 3.5\n  const THRESHOLD = 4.0;\n  const highAnxiety = anxiety > THRESHOLD;\n  const highAvoidance = avoidance > THRESHOLD;\n  if (!highAnxiety && !highAvoidance) return \"Secure (安全型)\";\n  if (highAnxiety && !highAvoidance) return \"Anxious (焦虑型)\";\n  if (!highAnxiety && highAvoidance) return \"Avoidant (回避型)\";\n  if (highAnxiety && highAvoidance) return \"Disorganized (恐惧/混乱型)\";\n  return \"Unknown\";\n};","map":{"version":3,"names":["calculateDimensionScore","answers","items","anxietySum","anxietyCount","avoidanceSum","avoidanceCount","forEach","item","rawScore","id","undefined","finalScore","reverse","dimension","anxiety","toFixed","avoidance","getAttachmentStyle","THRESHOLD","highAnxiety","highAvoidance"],"sources":["/Users/qearl/Desktop/依赖类型test/src/utils/scoring.js"],"sourcesContent":["/**\n * 计算依恋类型得分\n * @param {Object} answers - 用户答案对象 { questionId: score } (score: 1-7)\n * @param {Array} items - 题目定义数组\n * @returns {Object} { anxiety: number, avoidance: number }\n */\nexport const calculateDimensionScore = (answers, items) => {\n  let anxietySum = 0;\n  let anxietyCount = 0;\n  let avoidanceSum = 0;\n  let avoidanceCount = 0;\n\n  items.forEach((item) => {\n    const rawScore = answers[item.id];\n    if (rawScore === undefined) return; // 未回答\n\n    // 处理反向计分 (1-7分制：8 - score)\n    const finalScore = item.reverse ? 8 - rawScore : rawScore;\n\n    if (item.dimension === \"anxiety\") {\n      anxietySum += finalScore;\n      anxietyCount++;\n    } else if (item.dimension === \"avoidance\") {\n      avoidanceSum += finalScore;\n      avoidanceCount++;\n    }\n  });\n\n  return {\n    anxiety: anxietyCount > 0 ? (anxietySum / anxietyCount).toFixed(2) : 0,\n    avoidance:\n      avoidanceCount > 0 ? (avoidanceSum / avoidanceCount).toFixed(2) : 0,\n  };\n};\n\n/**\n * 判定依恋类型\n * @param {number} anxiety - 焦虑分\n * @param {number} avoidance - 回避分\n * @returns {string} 类型名称 (Secure, Anxious, Avoidant, Disorganized)\n */\nexport const getAttachmentStyle = (anxiety, avoidance) => {\n  // 阈值通常为中点，这里假设为 4.0 (1-7分制的中点)\n  // 也可以根据具体常模调整，例如 3.5\n  const THRESHOLD = 4.0;\n\n  const highAnxiety = anxiety > THRESHOLD;\n  const highAvoidance = avoidance > THRESHOLD;\n\n  if (!highAnxiety && !highAvoidance) return \"Secure (安全型)\";\n  if (highAnxiety && !highAvoidance) return \"Anxious (焦虑型)\";\n  if (!highAnxiety && highAvoidance) return \"Avoidant (回避型)\";\n  if (highAnxiety && highAvoidance) return \"Disorganized (恐惧/混乱型)\";\n\n  return \"Unknown\";\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,uBAAuB,GAAGA,CAACC,OAAO,EAAEC,KAAK,KAAK;EACzD,IAAIC,UAAU,GAAG,CAAC;EAClB,IAAIC,YAAY,GAAG,CAAC;EACpB,IAAIC,YAAY,GAAG,CAAC;EACpB,IAAIC,cAAc,GAAG,CAAC;EAEtBJ,KAAK,CAACK,OAAO,CAAEC,IAAI,IAAK;IACtB,MAAMC,QAAQ,GAAGR,OAAO,CAACO,IAAI,CAACE,EAAE,CAAC;IACjC,IAAID,QAAQ,KAAKE,SAAS,EAAE,OAAO,CAAC;;IAEpC;IACA,MAAMC,UAAU,GAAGJ,IAAI,CAACK,OAAO,GAAG,CAAC,GAAGJ,QAAQ,GAAGA,QAAQ;IAEzD,IAAID,IAAI,CAACM,SAAS,KAAK,SAAS,EAAE;MAChCX,UAAU,IAAIS,UAAU;MACxBR,YAAY,EAAE;IAChB,CAAC,MAAM,IAAII,IAAI,CAACM,SAAS,KAAK,WAAW,EAAE;MACzCT,YAAY,IAAIO,UAAU;MAC1BN,cAAc,EAAE;IAClB;EACF,CAAC,CAAC;EAEF,OAAO;IACLS,OAAO,EAAEX,YAAY,GAAG,CAAC,GAAG,CAACD,UAAU,GAAGC,YAAY,EAAEY,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;IACtEC,SAAS,EACPX,cAAc,GAAG,CAAC,GAAG,CAACD,YAAY,GAAGC,cAAc,EAAEU,OAAO,CAAC,CAAC,CAAC,GAAG;EACtE,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAME,kBAAkB,GAAGA,CAACH,OAAO,EAAEE,SAAS,KAAK;EACxD;EACA;EACA,MAAME,SAAS,GAAG,GAAG;EAErB,MAAMC,WAAW,GAAGL,OAAO,GAAGI,SAAS;EACvC,MAAME,aAAa,GAAGJ,SAAS,GAAGE,SAAS;EAE3C,IAAI,CAACC,WAAW,IAAI,CAACC,aAAa,EAAE,OAAO,cAAc;EACzD,IAAID,WAAW,IAAI,CAACC,aAAa,EAAE,OAAO,eAAe;EACzD,IAAI,CAACD,WAAW,IAAIC,aAAa,EAAE,OAAO,gBAAgB;EAC1D,IAAID,WAAW,IAAIC,aAAa,EAAE,OAAO,uBAAuB;EAEhE,OAAO,SAAS;AAClB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}